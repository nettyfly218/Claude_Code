# 单词掌握状态划分说明

## 📊 三种状态

应用中的每个单词会被自动划分为以下三种状态：

| 状态 | 英文标识 | 图标 | 颜色 | 说明 |
|------|---------|------|------|------|
| **新单词** | `new` | 🆕 | 黄色 | 刚开始学习，还不熟悉 |
| **学习中** | `learning` | 📖 | 青色 | 正在学习，有一定掌握 |
| **已掌握** | `mastered` | ✅ | 绿色 | 完全掌握，能熟练使用 |

---

## 🎯 划分依据

### 核心指标：掌握度 (Mastery)

**掌握度范围**: 0.0 ~ 1.0（0% ~ 100%）

掌握度是一个**动态分数**，会根据学习表现自动调整：
- ✅ 答对 → 掌握度上升
- ❌ 答错 → 掌握度下降

### 状态判定逻辑

```javascript
// 在 UserProgress.js 的 updateWordProgress() 方法中

if (wordData.mastery >= 0.95 && wordData.reviewCount >= 5) {
    wordData.status = 'mastered';  // 已掌握
} else if (wordData.mastery >= 0.3) {
    wordData.status = 'learning';  // 学习中
} else {
    wordData.status = 'new';       // 新单词
}
```

---

## 📐 具体划分标准

### 1️⃣ 新单词 (new)

**判定条件**：
- 掌握度 < 30% (`mastery < 0.3`)

**典型情况**：
- 刚开始学习的单词
- 答错次数较多的单词
- 长时间没有复习导致遗忘的单词

**特点**：
- 需要重点学习和记忆
- 会优先出现在学习列表中
- 建议多次复习

---

### 2️⃣ 学习中 (learning)

**判定条件**：
- 30% ≤ 掌握度 < 95% (`0.3 ≤ mastery < 0.95`)
- **或** 复习次数 < 5 次

**典型情况**：
- 已经学过几次，有印象
- 大部分时候能答对
- 偶尔会遗忘或混淆

**特点**：
- 需要继续巩固
- 应定期复习
- 是主要的学习阶段

---

### 3️⃣ 已掌握 (mastered)

**判定条件**（**两个条件都需要满足**）：
1. 掌握度 ≥ 95% (`mastery >= 0.95`)
2. **并且** 复习次数 ≥ 5 次 (`reviewCount >= 5`)

**典型情况**：
- 连续多次答对
- 学习次数足够多
- 基本不会出错

**特点**：
- 已经熟练掌握
- 复习频率可以降低
- 会根据遗忘曲线安排复习

---

## 🔄 掌握度计算规则

### 答对时（✅）

```javascript
// 掌握度提升（越接近1提升越慢，符合学习曲线）
increment = 0.2 × (1 - oldMastery)
newMastery = Math.min(1.0, oldMastery + increment)
```

**示例**：
- 初始掌握度 0.0 → 答对后：0.0 + 0.2 × (1 - 0) = **0.2**
- 当前掌握度 0.5 → 答对后：0.5 + 0.2 × (1 - 0.5) = **0.6**
- 当前掌握度 0.8 → 答对后：0.8 + 0.2 × (1 - 0.8) = **0.84**
- 当前掌握度 0.95 → 答对后：0.95 + 0.2 × (1 - 0.95) = **0.96**

**设计思想**：
- 初期提升快（0.2），鼓励学习
- 后期提升慢，需要多次正确才能到达"已掌握"
- 符合学习的实际规律

---

### 答错时（❌）

```javascript
// 掌握度下降（固定降低15%）
newMastery = Math.max(0, oldMastery - 0.15)
```

**示例**：
- 当前掌握度 0.8 → 答错后：0.8 - 0.15 = **0.65**
- 当前掌握度 0.3 → 答错后：0.3 - 0.15 = **0.15**
- 当前掌握度 0.1 → 答错后：max(0, 0.1 - 0.15) = **0.0**

**设计思想**：
- 答错惩罚适中（-15%）
- 一次错误不会导致完全遗忘
- 但连续错误会快速降低掌握度

---

## 📈 状态变化示例

### 典型学习路径

```
新单词 (0%)
    ↓ 答对5次，答错1次
学习中 (60%)
    ↓ 继续答对8次，答错2次
已掌握 (96%, 复习13次)
```

### 详细过程

| 次数 | 结果 | 掌握度变化 | 新掌握度 | 状态 |
|------|------|-----------|---------|------|
| 1 | ✅ 对 | 0 + 0.2×1 = 0.2 | 20% | 新单词 |
| 2 | ✅ 对 | 0.2 + 0.2×0.8 = 0.36 | 36% | **→ 学习中** |
| 3 | ❌ 错 | 0.36 - 0.15 = 0.21 | 21% | **→ 新单词** |
| 4 | ✅ 对 | 0.21 + 0.2×0.79 = 0.37 | 37% | **→ 学习中** |
| 5 | ✅ 对 | 0.37 + 0.2×0.63 = 0.496 | 50% | 学习中 |
| ... | ... | ... | ... | ... |
| 13 | ✅ 对 | 0.94 + 0.2×0.06 = 0.952 | 95.2% | **→ 已掌握** ✅ |

---

## 💡 常见问题解答

### Q1: 为什么"已掌握"需要复习次数≥5？

**A**: 防止"虚假掌握"。即使掌握度很高，如果只学习了1-2次，可能是运气好或题目简单。要求至少复习5次，确保真正掌握。

---

### Q2: 掌握度会一直保持吗？

**A**: 不会。如果长时间不复习，根据**遗忘曲线**，系统会自动降低掌握度（未来功能）。目前只有在答错时才会降低。

---

### Q3: 如何快速提升掌握度？

**A**:
1. 多次正确答题（每次答对提升约10-20%）
2. 连续答对效果更好
3. 定期复习，避免遗忘

---

### Q4: 单词状态会在哪里显示？

**A**:
1. **首页** - "单词掌握情况"卡片，显示三种状态的数量，点击可查看详细列表
2. **进度页** - "单词掌握情况"模块，展示分类统计
3. **学习页** - 单词卡片上会显示当前掌握度百分比

---

### Q5: 能手动修改单词状态吗？

**A**: 不能。状态是系统根据学习表现**自动判定**的，确保数据真实反映学习情况。

---

## 🎓 学习建议

### 针对不同状态的学习策略

#### 🆕 新单词
- **频率**: 每天学习
- **方法**: 反复记忆，大声朗读
- **目标**: 提升到"学习中"

#### 📖 学习中
- **频率**: 每2-3天复习
- **方法**: 通过例句理解，应用练习
- **目标**: 达到95%掌握度并复习≥5次

#### ✅ 已掌握
- **频率**: 按遗忘曲线复习（1天、3天、7天、15天、30天）
- **方法**: 快速过一遍，重点关注容易混淆的
- **目标**: 保持掌握度，避免遗忘

---

## 📊 数据示例

假设你当前的学习情况：

```
总单词数: 530个
├─ 新单词: 450个 (85%)      ← 还未开始学习
├─ 学习中: 65个 (12%)       ← 正在学习中
└─ 已掌握: 15个 (3%)        ← 已经掌握
```

这是正常的学习进度分布。随着学习的深入：
- "新单词"逐渐减少
- "学习中"逐渐增多
- "已掌握"稳步增长

---

## 🔍 技术实现位置

### 相关文件

1. **`js/utils/constants.js`** (第52-56行)
   ```javascript
   MASTERY_THRESHOLDS: {
       NEW: 0.3,       // 新单词阈值
       LEARNING: 0.9,  // 学习中阈值（未使用）
       MASTERED: 0.95  // 已掌握阈值
   }
   ```

2. **`js/models/UserProgress.js`** (第122-167行)
   - `updateWordProgress()` 方法：更新掌握度和状态
   - `getWordMasteryStats()` 方法：统计各状态单词数量

3. **`js/pages/HomePage.js`**
   - `generateWordMastery()` 方法：显示掌握情况
   - `showWordList()` 方法：展示单词详细列表

---

## ✨ 总结

| 状态 | 掌握度范围 | 额外条件 | 典型表现 |
|------|----------|---------|---------|
| 🆕 **新单词** | 0% ~ 29% | - | 刚开始学或经常答错 |
| 📖 **学习中** | 30% ~ 94% | 或复习<5次 | 大部分能答对 |
| ✅ **已掌握** | ≥ 95% | **且**复习≥5次 | 连续多次答对，很少出错 |

**核心理念**：
- 状态是**动态的**，会根据学习表现自动调整
- 掌握度计算**符合学习曲线**（初期快，后期慢）
- 判定标准**科学合理**，确保真实反映学习效果

---

**更新日期**: 2026-01-04
**版本**: v1.0
